name: Integration Tests

on:
   push:
     branches:
       - master
     tags:
       - '*'
   pull_request:

jobs:
   integration_tests:
     runs-on: macos
     strategy:
       matrix:
         xcode: [11.1, 11.3.1, 11.4]
     env:
       DEVELOPER_DIR: /Applications/Xcode_${{ matrix.xcode }}.app
       HOMEBREW_NO_AUTO_UPDATE: 1
     steps:
     - uses: actions/checkout@v1
     - name: Install Carthage
       run: |
         ls /Applications
         brew uninstall carthage
         make install
     - name: Run bats IntegrationTests
       run: |
         brew install bats
         bats IntegrationTests
